{"version":3,"file":"fuzzify-pashto.umd.js","sources":["../src/replacer.ts","../src/fuzzify-pashto.ts"],"sourcesContent":["/**\n * Copyright (c) openpashto.com\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n// TODO: add southern ش س (at beginning of word?)\nconst sSounds = \"صسثڅ\";\nconst zSounds = \"زضظذځژ\";\nconst tdSounds = \"طتټدډ\";\nconst velarPlosives = \"ګږکقگك\";\nconst rLikeSounds = \"رړڑڼ\";\nconst labialPlosivesAndFricatives = \"فپب\";\n// Includes Arabic ى \\u0649\nconst theFiveYeys = \"ېۍیيئےى\";\nconst guttural = \"ښخشخهحغ\";\n\ninterface IReplacerInfoItem {\n  char: string;\n  range: string;\n  plus?: string[];\n  ignorable?: boolean;\n}\n\nconst pashtoReplacerInfo: IReplacerInfoItem[] = [\n  { char: \"اً\", range: \"ان\" },\n  { char: \"ا\", range: \"اآهع\", plus: [\"اً\"] }, // TODO: make optional (if not at the beginning of word)\n  { char: \"آ\", range: \"اآه\" },\n  { char: \"ٱ\", range: \"اآه\" },\n  { char: \"ٲ\", range: \"اآه\" },\n  { char: \"ٳ\", range: \"اآه\" },\n\n  { char: \"ی\", range: theFiveYeys },\n  { char: \"ي\", range: theFiveYeys },\n  { char: \"ې\", range: theFiveYeys },\n  { char: \"ۍ\", range: theFiveYeys },\n  { char: \"ئ\", range: theFiveYeys },\n  { char: \"ے\", range: theFiveYeys },\n\n  { char: \"س\", range: sSounds },\n  { char: \"ص\", range: sSounds },\n  { char: \"ث\", range: sSounds },\n  { char: \"څ\", range: sSounds + \"چ\" },\n\n  { char: \"ج\", range: \"چجڅځژ\" },\n  { char: \"چ\", range: \"چجڅځ\" },\n\n  { char: \"ه\", range: \"اهحہ\" },\n  { char: \"ۀ\", range: \"اهحہ\" },\n  { char: \"ہ\", range: \"اهحہ\" },\n\n  { char: \"ع\", range: \"اوع\", ignorable: true },\n  { char: \"و\", range: \"وع\", ignorable: true },\n  { char: \"ؤ\", range: \"وع\"},\n\n  { char: \"ښ\", range: guttural },\n  { char: \"غ\", range: guttural },\n  { char: \"خ\", range: guttural },\n  { char: \"ح\", range: guttural },\n\n  { char: \"ش\", range: \"شښ\" },\n\n  { char: \"ز\", range: zSounds },\n  { char: \"ض\", range: zSounds },\n  { char: \"ذ\", range: zSounds },\n  { char: \"ځ\", range: zSounds + \"جڅ\"},\n  { char: \"ظ\", range: zSounds },\n\n  { char: \"ژ\", range: \"زضظژذځږج\" },\n\n  { char: \"ر\", range: rLikeSounds },\n  { char: \"ړ\", range: rLikeSounds },\n  { char: \"ڑ\", range: rLikeSounds },\n\n  { char: \"ت\", range: tdSounds },\n  { char: \"ټ\", range: tdSounds },\n  { char: \"ٹ\", range: tdSounds },\n  { char: \"ط\", range: tdSounds },\n  { char: \"د\", range: tdSounds },\n  { char: \"ډ\", range: tdSounds },\n  { char: \"ڈ\", range: tdSounds },\n\n  { char: \"نب\", range: \"نبم\" },\n  { char: \"ن\", range: \"نڼ\", plus: [\"اً\"] }, // allow for words using اٌ at the end to be seached for with ن\n  { char: \"ڼ\", range: \"نڼړڑ\" },\n\n  { char: \"ک\", range: velarPlosives },\n  { char: \"ګ\", range: velarPlosives },\n  { char: \"گ\", range: velarPlosives },\n  { char: \"ق\", range: velarPlosives },\n\n  { char: \"ږ\", range: velarPlosives + \"ژ\" },\n\n  { char: \"ب\", range: labialPlosivesAndFricatives },\n  { char: \"پ\", range: labialPlosivesAndFricatives },\n  { char: \"ف\", range: labialPlosivesAndFricatives },\n];\n\n// tslint:disable-next-line\nconst pashtoReplacerRegex = /اً|ا|آ|ٱ|ٲ|ٳ|ی|ي|ې|ۍ|ئ|ے|س|ص|ث|څ|ج|چ|ه|ۀ|ہ|ع|و|ؤ|ښ|غ|خ|ح|ش|ز|ض|ذ|ځ|ظ|ژ|ر|ړ|ڑ|ت|ټ|ٹ|ط|د|ډ|ڈ|نب|ن|ڼ|ک|ګ|گ|ق|ږ|ب|پ|ف/g;\n\nexport { pashtoReplacerInfo, pashtoReplacerRegex };\n","/**\n * Copyright (c) openpashto.com\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport {\n  pashtoReplacerInfo,\n  pashtoReplacerRegex,\n} from \"./replacer\";\nimport { IFuzzifyOptions } from \"./types\";\n\nexport const pashtoCharacterRange = \"\\u0621-\\u065f\\u0670-\\u06d3\\u06d5\";\n// Unfortunately, without ES2018 lookbehind assertions word boundary matching is not as clean\n// Without lookbehind assertions, we are unable to ignore punctuation directly in front of a word\n// and matching results include a space before the word\nexport const pashtoWordBoundaryBeginning = `(?:^|[^${pashtoCharacterRange}])`;\n// These problems are solved by using the ES2018 lookbehind assertions where environments permit\nexport const pashtoWordBoundaryBeginningWithES2018 = `(?<![${pashtoCharacterRange}])`;\nconst diacritics = \"\\u064b-\\u065f\\u0670\\u0674\"; // pretty generous diactritic range\n\nfunction sanitizeInput(input: string, options: IFuzzifyOptions): string {\n  let safeInput = input.trim().replace(/[#-.]|[[-^]|[?|{}]/g, \"\");\n  if (options.allowSpacesInWords) {\n    safeInput = safeInput.replace(/ /g, \"\");\n  }\n  if (options.ignoreDiacritics) {\n    // Using literal regular expressions instead of variable for security linting\n    safeInput = safeInput.replace(new RegExp(\"[\\u064b-\\u065f\\u0670\\u0674]\", \"g\"), \"\");\n  }\n  return safeInput;\n}\n\nfunction prepareMainRegexLogic(sanitizedInput: string, options: IFuzzifyOptions): string {\n  return sanitizedInput.replace(pashtoReplacerRegex, (mtch) => {\n    const r = pashtoReplacerInfo.find((x) => x.char === mtch);\n    let section = `[${r && r.range}]`;\n    if (r && r.plus) {\n      const additionalOptionGroups = r.plus.join(\"|\");\n      section = `(?:${section}|${additionalOptionGroups})`;\n    }\n    // tslint:disable-next-line\n    return `${section}${r && r.ignorable ? \"?\" : \"\"}ع?${options.ignoreDiacritics ? `[${diacritics}]?`: \"\"}${options.allowSpacesInWords ? \"\\ ?\" : \"\"}`;\n  });\n}\n\nfunction getBeginningWithAnywhere(options: IFuzzifyOptions): string {\n  // Override the \"anywhere\" when matchWholeWordOnly is true\n  if (options.matchWholeWordOnly) {\n    return pashtoWordBoundaryBeginning;\n  }\n  if (options.returnWholeWord) {\n    // Return the whole world even if matching from the middle (if desired)\n    return `${pashtoWordBoundaryBeginning}[${pashtoCharacterRange}]*`;\n  }\n  return \"\";\n}\n\nfunction prepareBeginning(options: IFuzzifyOptions): string {\n  // options.matchStart can be \"string\", \"anywhere\", or \"word\" (default)\n  if (options.matchStart === \"string\") {\n    return \"^\";\n  }\n  if (options.matchStart === \"anywhere\") {\n    return getBeginningWithAnywhere(options);\n  }\n  // options.matchStart default \"word\"\n  // return the beginning word boundary depending on whether es2018 is enabled or not\n  return options.es2018 ? pashtoWordBoundaryBeginningWithES2018 : pashtoWordBoundaryBeginning;\n}\n\nfunction prepareEnding(options: IFuzzifyOptions): string {\n  if (options.matchWholeWordOnly) {\n    return `(?![${pashtoCharacterRange}])`;\n  }\n  if (options.returnWholeWord) {\n    return `[${pashtoCharacterRange}]*(?![${pashtoCharacterRange}])`;\n  }\n  return \"\";\n}\n\n// Main function for returning a regular expression based on a string of Pashto text\nexport function fuzzifyPashto(input: string, options: IFuzzifyOptions = {}): string {\n  const sanitizedInput = sanitizeInput(input, options);\n  const mainRegexLogic = prepareMainRegexLogic(sanitizedInput, options);\n  const beginning = prepareBeginning(options);\n  const ending = prepareEnding(options);\n  return `${beginning}${mainRegexLogic}${ending}`;\n}\n"],"names":[],"mappings":"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"}