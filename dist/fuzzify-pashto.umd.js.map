{"version":3,"file":"fuzzify-pashto.umd.js","sources":["../src/fuzzify-pashto.ts"],"sourcesContent":["/**\n * Copyright (c) openpashto.com\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\ninterface FuzzifyOptions {\n  globalMatch?: boolean;\n  matchStart?: string;\n  matchWholeWordOnly?: boolean;\n  allowSpacesInWords?: boolean;\n  returnWholeWord?: boolean;\n}\n\n// Arabic punctuation to exclude\n// ، \\u060c ؟ \\u061f ؛ \\u061b ۔ \\u06d4\n// Digits etc. exclude \\u0660 - \\u066f\n\nconst pashtoCharacterRange = \"\\u0621-\\u065f\\u0670-\\u06d3\\u06d5\";\n// ISSUE: This does not work if the word is starting with a non-Pashto character like \" or « or .\n// I don't know how to solve this without lookbehinds in JavaScript (not available on all platforms)\n// Need to try all these ideas: https://stackoverflow.com/questions/641407/javascript-negative-lookbehind-equivalent\nconst pashtoWordBoundaryBeginning = `(^|[^${pashtoCharacterRange}])`;\n// TODO: Deal with diacritics etc.\n// .replace(/[\\u0600-\\u061e\\u064c-\\u0670\\u06D6-\\u06Ed]/g, '');\n\n// TOOD: handle \"\" input\n\n// TODO: add southern ش س (at beginning of word?)\n\nconst sSounds = \"صسثڅ\";\nconst zSounds = \"زضظذځژ\";\nconst tdSounds = \"طتټدډ\";\nconst velarPlosives = \"ګږکقگك\";\nconst rLikeSounds = \"رړڑڼ\";\nconst labialPlosivesAndFricatives = \"فپب\";\n// Includes Arabic ى \\u0649  \nconst theFiveYeys = \"ېۍیيئےى\";\n\nconst pashtoReplacer = {\n  \"اً\": { range: \"ان\" },\n  \"ا\": { range: \"اآهع\", plus: [\"اً\"] }, // TODO: make optional (if not at the beginning of word)\n  \"آ\": { range: \"اآه\" },\n  \"ٱ\": { range: \"اآه\" },\n  \"ٲ\": { range: \"اآه\" },\n  \"ٳ\": { range: \"اآه\" },\n\n  \"ی\": { range: theFiveYeys },\n  \"ي\": { range: theFiveYeys },\n  \"ې\": { range: theFiveYeys },\n  \"ۍ\": { range: theFiveYeys },\n  \"ئ\": { range: theFiveYeys },\n  \"ے\": { range: theFiveYeys },\n\n  \"س\": { range: sSounds }, \n  \"ص\": { range: sSounds },\n  \"ث\": { range: sSounds },\n  \"څ\": { range: sSounds },\n\n  \"ج\": { range: \"چجڅ\" }, \n  \"چ\": { range: \"چجڅ\" },\n  \n  \"ه\": { range: \"اهحہ\" },\n  \"ۀ\": { range: \"اهحہ\" },\n  \"ہ\": { range: \"اهحہ\" },\n\n  \"ع\": { range: \"اوع\", ignorable: true }, \n  \"و\": { range: \"وع\", ignorable: true }, \n  \"ؤ\": { range: \"وع\"},\n  \n  \"ښ\": { range: \"ښخشخهحغ\" },\n  \"غ\": { range: 'ښخشخهحغ' },\n  \"خ\": { range: 'ښخشخهحغ' },\n  \"ح\": { range: 'ښخشخهحغ' },\n\n  \"ش\": { range: 'شښ' },\n\n  \"ز\": { range: zSounds },\n  \"ض\": { range: zSounds },\n  \"ذ\": { range: zSounds },\n  \"ځ\": { range: zSounds },\n  \"ظ\": { range: zSounds },\n\n  \"ژ\": { range: 'زضظژذځږ' },\n\n  \"ر\": { range: rLikeSounds },\n  \"ړ\": { range: rLikeSounds },\n  \"ڑ\": { range: rLikeSounds },\n\n  \"ت\": { range: tdSounds },\n  \"ټ\": { range: tdSounds },\n  \"ٹ\": { range: tdSounds },\n  \"ط\": { range: tdSounds },\n  \"د\": { range: tdSounds },\n  \"ډ\": { range: tdSounds },\n  \"ڈ\": { range: tdSounds },\n\n  \"نب\": { range: 'نبم' },\n  \"ن\": { range: 'نڼ', plus: [\"اً\"] }, // allow for words using اٌ at the end te be seached for with ن\n  \"ڼ\": { range: 'نڼړڑ' },\n\n  \"ک\": { range: velarPlosives },\n  \"ګ\": { range: velarPlosives },\n  \"گ\": { range: velarPlosives },\n  \"ق\": { range: velarPlosives },\n\n  \"ږ\": { range: velarPlosives + 'ژ' },\n\n  \"ب\": { range: labialPlosivesAndFricatives },\n  \"پ\": { range: labialPlosivesAndFricatives },\n  \"ف\": { range: labialPlosivesAndFricatives },\n}\n\nconst thingsToReplace = Object.keys(pashtoReplacer);\nconst pashtoReplacerRegex = new RegExp(thingsToReplace.reduce((accumulator, currentValue, i) => {\n  if (i === thingsToReplace.length - 1) {\n    return accumulator + currentValue; \n  } \n  return accumulator + currentValue + \"|\";\n}, \"\"), \"g\");\n\nexport function fuzzifyPashto(input: string, options: FuzzifyOptions = {}): RegExp {\n  let safeInput = input.trim().replace(/[#-.]|[[-^]|[?|{}]/g, '');\n  if (options.allowSpacesInWords) {\n    safeInput = safeInput.replace(/ /g, '');\n  }\n  const regexLogic = safeInput.replace(pashtoReplacerRegex, (mtch) => {\n    const r = pashtoReplacer[mtch];\n    let range = `[${r.range}]`;\n    if (r.plus) {\n      const additionalOptionGroups = r.plus.reduce((t: string, o: string) => {\n        return t + o + \"|\";\n      }, \"\");\n      range = `(${additionalOptionGroups}${range})`;\n    }\n    return `${range}${r.ignorable ? '?' : ''}ع?${options.allowSpacesInWords ? '\\ ?' : ''}`\n  });\n  // Set how to begin the matching (default at the beginning of a word)\n  let beginning = options.matchStart === \"string\" ? \"^\" :\n                    options.matchStart === \"anywhere\" ? \"\" :\n                    pashtoWordBoundaryBeginning; // \"word\" is the default\n  let ending = \"\";\n  if (options.matchWholeWordOnly) {\n    if (options.matchStart === \"anywhere\") beginning = pashtoWordBoundaryBeginning;\n    ending = `(?![${pashtoCharacterRange}])`;\n  }\n  // If they're already using matchWholeWordOnly, don't change it\n  if (options.returnWholeWord && !options.matchWholeWordOnly) {\n    ending = `[${pashtoCharacterRange}]*(?![${pashtoCharacterRange}])`;\n    if (options.matchStart === \"anywhere\") {\n      beginning = `${pashtoWordBoundaryBeginning}[${pashtoCharacterRange}]*`; \n    }\n  }\n  const flags = `m${options.globalMatch === false ? '' : 'g'}`;\n  return new RegExp(`${beginning}${regexLogic}${ending}`, flags);\n}\n  "],"names":[],"mappings":"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"}