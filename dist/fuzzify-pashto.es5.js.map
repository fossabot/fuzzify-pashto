{"version":3,"file":"fuzzify-pashto.es5.js","sources":["../src/replacer.ts","../src/fuzzify-pashto.ts"],"sourcesContent":["/**\n * Copyright (c) openpashto.com\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n// TODO: add southern ش س (at beginning of word?)\nconst sSounds = \"صسثڅ\";\nconst zSounds = \"زضظذځژ\";\nconst tdSounds = \"طتټدډ\";\nconst velarPlosives = \"ګږکقگك\";\nconst rLikeSounds = \"رړڑڼ\";\nconst labialPlosivesAndFricatives = \"فپب\";\n// Includes Arabic ى \\u0649\nconst theFiveYeys = \"ېۍیيئےى\";\nconst guttural = \"ښخشخهحغ\";\n\ninterface IReplacerInfoItem {\n  char: string;\n  range: string;\n  plus?: string[];\n  ignorable?: boolean;\n}\n\nconst pashtoReplacerInfo: IReplacerInfoItem[] = [\n  { char: \"اً\", range: \"ان\" },\n  { char: \"ا\", range: \"اآهع\", plus: [\"اً\"] }, // TODO: make optional (if not at the beginning of word)\n  { char: \"آ\", range: \"اآه\" },\n  { char: \"ٱ\", range: \"اآه\" },\n  { char: \"ٲ\", range: \"اآه\" },\n  { char: \"ٳ\", range: \"اآه\" },\n\n  { char: \"ی\", range: theFiveYeys },\n  { char: \"ي\", range: theFiveYeys },\n  { char: \"ې\", range: theFiveYeys },\n  { char: \"ۍ\", range: theFiveYeys },\n  { char: \"ئ\", range: theFiveYeys },\n  { char: \"ے\", range: theFiveYeys },\n\n  { char: \"س\", range: sSounds },\n  { char: \"ص\", range: sSounds },\n  { char: \"ث\", range: sSounds },\n  { char: \"څ\", range: sSounds + \"چ\" },\n\n  { char: \"ج\", range: \"چجڅځژ\" },\n  { char: \"چ\", range: \"چجڅځ\" },\n\n  { char: \"ه\", range: \"اهحہ\" },\n  { char: \"ۀ\", range: \"اهحہ\" },\n  { char: \"ہ\", range: \"اهحہ\" },\n\n  { char: \"ع\", range: \"اوع\", ignorable: true },\n  { char: \"و\", range: \"وع\", ignorable: true },\n  { char: \"ؤ\", range: \"وع\"},\n\n  { char: \"ښ\", range: guttural },\n  { char: \"غ\", range: guttural },\n  { char: \"خ\", range: guttural },\n  { char: \"ح\", range: guttural },\n\n  { char: \"ش\", range: \"شښ\" },\n\n  { char: \"ز\", range: zSounds },\n  { char: \"ض\", range: zSounds },\n  { char: \"ذ\", range: zSounds },\n  { char: \"ځ\", range: zSounds + \"جڅ\"},\n  { char: \"ظ\", range: zSounds },\n\n  { char: \"ژ\", range: \"زضظژذځږج\" },\n\n  { char: \"ر\", range: rLikeSounds },\n  { char: \"ړ\", range: rLikeSounds },\n  { char: \"ڑ\", range: rLikeSounds },\n\n  { char: \"ت\", range: tdSounds },\n  { char: \"ټ\", range: tdSounds },\n  { char: \"ٹ\", range: tdSounds },\n  { char: \"ط\", range: tdSounds },\n  { char: \"د\", range: tdSounds },\n  { char: \"ډ\", range: tdSounds },\n  { char: \"ڈ\", range: tdSounds },\n\n  { char: \"نب\", range: \"نبم\" },\n  { char: \"ن\", range: \"نڼ\", plus: [\"اً\"] }, // allow for words using اٌ at the end to be seached for with ن\n  { char: \"ڼ\", range: \"نڼړڑ\" },\n\n  { char: \"ک\", range: velarPlosives },\n  { char: \"ګ\", range: velarPlosives },\n  { char: \"گ\", range: velarPlosives },\n  { char: \"ق\", range: velarPlosives },\n\n  { char: \"ږ\", range: velarPlosives + \"ژ\" },\n\n  { char: \"ب\", range: labialPlosivesAndFricatives },\n  { char: \"پ\", range: labialPlosivesAndFricatives },\n  { char: \"ف\", range: labialPlosivesAndFricatives },\n];\n\n// tslint:disable-next-line\nconst pashtoReplacerRegex = /اً|ا|آ|ٱ|ٲ|ٳ|ی|ي|ې|ۍ|ئ|ے|س|ص|ث|څ|ج|چ|ه|ۀ|ہ|ع|و|ؤ|ښ|غ|خ|ح|ش|ز|ض|ذ|ځ|ظ|ژ|ر|ړ|ڑ|ت|ټ|ٹ|ط|د|ډ|ڈ|نب|ن|ڼ|ک|ګ|گ|ق|ږ|ب|پ|ف/g;\n\nexport { pashtoReplacerInfo, pashtoReplacerRegex };\n","/**\n * Copyright (c) openpashto.com\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport {\n  pashtoReplacerInfo,\n  pashtoReplacerRegex,\n} from \"./replacer\";\nimport { IFuzzifyOptions } from \"./types\";\n\nexport const pashtoCharacterRange = \"\\u0621-\\u065f\\u0670-\\u06d3\\u06d5\";\n// Unfortunately, without ES2018 lookbehind assertions word boundary matching is not as clean\n// Without lookbehind assertions, we are unable to ignore punctuation directly in front of a word\n// and matching results include a space before the word\nexport const pashtoWordBoundaryBeginning = `(?:^|[^${pashtoCharacterRange}])`;\n// These problems are solved by using the ES2018 lookbehind assertions where environments permit\nexport const pashtoWordBoundaryBeginningWithES2018 = `(?<![${pashtoCharacterRange}])`;\nconst diacritics = \"\\u064b-\\u065f\\u0670\\u0674\"; // pretty generous diactritic range\n\nfunction sanitizeInput(input: string, options: IFuzzifyOptions): string {\n  let safeInput = input.trim().replace(/[#-.]|[[-^]|[?|{}]/g, \"\");\n  if (options.allowSpacesInWords) {\n    safeInput = safeInput.replace(/ /g, \"\");\n  }\n  if (options.ignoreDiacritics) {\n    // Using literal regular expressions instead of variable for security linting\n    safeInput = safeInput.replace(new RegExp(\"[\\u064b-\\u065f\\u0670\\u0674]\", \"g\"), \"\");\n  }\n  return safeInput;\n}\n\nfunction prepareMainRegexLogic(sanitizedInput: string, options: IFuzzifyOptions): string {\n  return sanitizedInput.replace(pashtoReplacerRegex, (mtch) => {\n    const r = pashtoReplacerInfo.find((x) => x.char === mtch);\n    let section = `[${r && r.range}]`;\n    if (r && r.plus) {\n      const additionalOptionGroups = r.plus.join(\"|\");\n      section = `(?:${section}|${additionalOptionGroups})`;\n    }\n    // tslint:disable-next-line\n    return `${section}${r && r.ignorable ? \"?\" : \"\"}ع?${options.ignoreDiacritics ? `[${diacritics}]?`: \"\"}${options.allowSpacesInWords ? \"\\ ?\" : \"\"}`;\n  });\n}\n\nfunction getBeginningWithAnywhere(options: IFuzzifyOptions): string {\n  // Override the \"anywhere\" when matchWholeWordOnly is true\n  if (options.matchWholeWordOnly) {\n    return pashtoWordBoundaryBeginning;\n  }\n  if (options.returnWholeWord) {\n    // Return the whole world even if matching from the middle (if desired)\n    return `${pashtoWordBoundaryBeginning}[${pashtoCharacterRange}]*`;\n  }\n  return \"\";\n}\n\nfunction prepareBeginning(options: IFuzzifyOptions): string {\n  // options.matchStart can be \"string\", \"anywhere\", or \"word\" (default)\n  if (options.matchStart === \"string\") {\n    return \"^\";\n  }\n  if (options.matchStart === \"anywhere\") {\n    return getBeginningWithAnywhere(options);\n  }\n  // options.matchStart default \"word\"\n  // return the beginning word boundary depending on whether es2018 is enabled or not\n  return options.es2018 ? pashtoWordBoundaryBeginningWithES2018 : pashtoWordBoundaryBeginning;\n}\n\nfunction prepareEnding(options: IFuzzifyOptions): string {\n  if (options.matchWholeWordOnly) {\n    return `(?![${pashtoCharacterRange}])`;\n  }\n  if (options.returnWholeWord) {\n    return `[${pashtoCharacterRange}]*(?![${pashtoCharacterRange}])`;\n  }\n  return \"\";\n}\n\n// Main function for returning a regular expression based on a string of Pashto text\nexport function fuzzifyPashto(input: string, options: IFuzzifyOptions = {}): string {\n  const sanitizedInput = sanitizeInput(input, options);\n  const mainRegexLogic = prepareMainRegexLogic(sanitizedInput, options);\n  const beginning = prepareBeginning(options);\n  const ending = prepareEnding(options);\n  return `${beginning}${mainRegexLogic}${ending}`;\n}\n"],"names":[],"mappings":"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"}